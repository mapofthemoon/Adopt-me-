{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/shelters.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction SheltersComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\", 1);\n    i0.ɵɵtext(2, \"Loading...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction SheltersComponent_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\", 2);\n    i0.ɵɵtext(2, \"Shelters not found!\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction SheltersComponent_div_1_div_2_form_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 6);\n    i0.ɵɵlistener(\"ngSubmit\", function SheltersComponent_div_1_div_2_form_3_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r6.add_shelter());\n    });\n    i0.ɵɵelementStart(1, \"div\", 7)(2, \"input\", 8);\n    i0.ɵɵlistener(\"ngModelChange\", function SheltersComponent_div_1_div_2_form_3_Template_input_ngModelChange_2_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r8.shelter.name = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"label\", 9);\n    i0.ɵɵtext(4, \"Name\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 7)(6, \"input\", 10);\n    i0.ɵɵlistener(\"ngModelChange\", function SheltersComponent_div_1_div_2_form_3_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r9 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r9.shelter.country = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"label\", 11);\n    i0.ɵɵtext(8, \"Country\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 7)(10, \"input\", 12);\n    i0.ɵɵlistener(\"ngModelChange\", function SheltersComponent_div_1_div_2_form_3_Template_input_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r10 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r10.shelter.city = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"label\", 13);\n    i0.ɵɵtext(12, \"City\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"button\", 14);\n    i0.ɵɵtext(14, \"ADD\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function SheltersComponent_div_1_div_2_form_3_Template_button_click_15_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r11 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r11.show_shelter_form = false);\n    });\n    i0.ɵɵtext(16, \"CANCEL\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r4.shelter.name);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r4.shelter.country);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r4.shelter.city);\n  }\n}\nfunction SheltersComponent_div_1_div_2_div_4_form_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 23);\n    i0.ɵɵlistener(\"ngSubmit\", function SheltersComponent_div_1_div_2_div_4_form_10_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r14.update_shelter());\n    });\n    i0.ɵɵelementStart(1, \"div\", 7)(2, \"input\", 24);\n    i0.ɵɵlistener(\"ngModelChange\", function SheltersComponent_div_1_div_2_div_4_form_10_Template_input_ngModelChange_2_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r16 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r16.shelter.name = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"label\", 25);\n    i0.ɵɵtext(4, \"Name\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 7)(6, \"input\", 26);\n    i0.ɵɵlistener(\"ngModelChange\", function SheltersComponent_div_1_div_2_div_4_form_10_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r17 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r17.shelter.country = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"label\", 25);\n    i0.ɵɵtext(8, \"Country\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 7)(10, \"input\", 27);\n    i0.ɵɵlistener(\"ngModelChange\", function SheltersComponent_div_1_div_2_div_4_form_10_Template_input_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r18 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r18.shelter.city = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"label\", 25);\n    i0.ɵɵtext(12, \"City\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"button\", 14);\n    i0.ɵɵtext(14, \"UPDATE\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function SheltersComponent_div_1_div_2_div_4_form_10_Template_button_click_15_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r19 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r19.show_shelter_form = false);\n    });\n    i0.ɵɵtext(16, \"CANCEL\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const s_r12 = i0.ɵɵnextContext().$implicit;\n    const ctx_r13 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"floatingName\", s_r12.id, \"\")(\"name\", \"shelter_name_\", s_r12.id, \"\");\n    i0.ɵɵproperty(\"ngModel\", ctx_r13.shelter.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"for\", \"floatingName\", s_r12.id, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"floatingCountry\", s_r12.id, \"\")(\"name\", \"shelter_country_\", s_r12.id, \"\");\n    i0.ɵɵproperty(\"ngModel\", ctx_r13.shelter.country);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"for\", \"floatingCountry\", s_r12.id, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"floatingCity\", s_r12.id, \"\")(\"name\", \"shelter_city_\", s_r12.id, \"\");\n    i0.ɵɵproperty(\"ngModel\", ctx_r13.shelter.city);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"for\", \"floatingCity\", s_r12.id, \"\");\n  }\n}\nfunction SheltersComponent_div_1_div_2_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"div\", 17)(2, \"h5\", 18);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 19);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function SheltersComponent_div_1_div_2_div_4_Template_button_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r22);\n      const s_r12 = restoredCtx.$implicit;\n      const ctx_r21 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r21.edit_shelter(s_r12));\n    });\n    i0.ɵɵtext(7, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function SheltersComponent_div_1_div_2_div_4_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r22);\n      const s_r12 = restoredCtx.$implicit;\n      const ctx_r23 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r23.delete_shelter(s_r12.id));\n    });\n    i0.ɵɵtext(9, \"Delete\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(10, SheltersComponent_div_1_div_2_div_4_form_10_Template, 17, 12, \"form\", 22);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const s_r12 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(s_r12.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", s_r12.city, \", \", s_r12.country, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r5.show_shelter_form);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.show_shelter_form && ctx_r5.selected_id == s_r12.id);\n  }\n}\nfunction SheltersComponent_div_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function SheltersComponent_div_1_div_2_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r24.show_add_shelter_form());\n    });\n    i0.ɵɵtext(2, \"ADD SHELTER\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, SheltersComponent_div_1_div_2_form_3_Template, 17, 3, \"form\", 4);\n    i0.ɵɵtemplate(4, SheltersComponent_div_1_div_2_div_4_Template, 11, 5, \"div\", 5);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r3.show_shelter_form);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.show_shelter_form && ctx_r3.selected_id == -1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.shelters);\n  }\n}\nfunction SheltersComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, SheltersComponent_div_1_div_1_Template, 3, 0, \"div\", 0);\n    i0.ɵɵtemplate(2, SheltersComponent_div_1_div_2_Template, 5, 3, \"div\", 0);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.shelters_not_found);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.shelters_not_found);\n  }\n}\nexport class SheltersComponent {\n  constructor(sheltersService) {\n    this.sheltersService = sheltersService;\n    this.shelters = [];\n    this.shelters_not_found = false;\n    this.loaded = true;\n    this.show_shelter_form = false;\n    this.shelter = {};\n    this.selected_id = -1;\n  }\n  ngOnInit() {\n    this.loaded = false;\n    this.sheltersService.getAllShelters().subscribe(shelters => {\n      this.shelters = shelters;\n      this.loaded = true;\n    }, error => {\n      this.shelters_not_found = true;\n      this.loaded = true;\n    });\n  }\n  add_shelter() {\n    this.sheltersService.addShelter(this.shelter).subscribe(s => {\n      //temp comment\n      // this.shelters.push(s);\n      this.show_shelter_form = false;\n    }, err => {\n      console.log('Shelter can not be added');\n    });\n  }\n  edit_shelter(s) {\n    this.show_shelter_form = true;\n    this.selected_id = s.id;\n    this.shelter = s;\n  }\n  update_shelter() {\n    this.sheltersService.updateShelter(this.selected_id, this.shelter).subscribe(s => {\n      for (let i = 0; i < this.shelters.length; i++) {\n        if (this.shelters[i].id === s.id) {\n          this.shelters[i] = s;\n          break;\n        }\n      }\n      this.show_shelter_form = false;\n      //or\n      // this.sheltersService.getAllShelters().subscribe((shelters) => {\n      //   this.shelters = shelters;\n      // });\n    }, err => {\n      console.log('error updating shelter');\n    });\n  }\n  delete_shelter(id) {\n    this.sheltersService.deleteShelter(id).subscribe(success => {\n      console.log('Shelter has successfully been deleted!');\n      for (let i = 0; i < this.shelters.length; i++) {\n        if (this.shelters[i].id === id) {\n          this.shelters.splice(i, 1);\n          break;\n        }\n      }\n      //or\n      // this.sheltersService.getAllShelters().subscribe((shelters) => {\n      //   this.shelters = shelters;\n      // });\n    }, err => {\n      console.log('Error deleting shelter');\n    });\n  }\n  show_add_shelter_form() {\n    this.show_shelter_form = true;\n    this.shelter = {};\n    this.selected_id = -1;\n  }\n}\nSheltersComponent.ɵfac = function SheltersComponent_Factory(t) {\n  return new (t || SheltersComponent)(i0.ɵɵdirectiveInject(i1.SheltersService));\n};\nSheltersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SheltersComponent,\n  selectors: [[\"app-shelters\"]],\n  decls: 2,\n  vars: 2,\n  consts: [[4, \"ngIf\"], [1, \"text-info\", \"mt-4\", \"ml-4\"], [1, \"text-danger\", \"mt-4\", \"ml-4\"], [1, \"btn\", \"btn-success\", \"my-4\", 3, \"disabled\", \"click\"], [\"class\", \"card px-5 py-5\", \"style\", \"width: 60%\", 3, \"ngSubmit\", 4, \"ngIf\"], [\"class\", \"card mt-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"card\", \"px-5\", \"py-5\", 2, \"width\", \"60%\", 3, \"ngSubmit\"], [1, \"form-floating\", \"mb-3\", \"ml-3\"], [\"type\", \"text\", \"id\", \"floatingName\", \"placeholder\", \"shelter_name\", \"name\", \"shelter_name\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"floatingName\"], [\"type\", \"text\", \"id\", \"floatingCountry\", \"placeholder\", \"shelter_country\", \"name\", \"shelter_country\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"floatingCountry\"], [\"type\", \"text\", \"id\", \"floatingCity\", \"placeholder\", \"shelter_city\", \"name\", \"shelter_city\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"floatingCity\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", \"mb-3\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"card\", \"mt-3\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [1, \"btn\", \"btn-danger\", \"ml-3\", 3, \"click\"], [\"class\", \"card px-5 py-5 mx-3 my-3\", \"style\", \"width: 60%\", 3, \"ngSubmit\", 4, \"ngIf\"], [1, \"card\", \"px-5\", \"py-5\", \"mx-3\", \"my-3\", 2, \"width\", \"60%\", 3, \"ngSubmit\"], [\"type\", \"text\", \"placeholder\", \"shelter_name\", 1, \"form-control\", 3, \"id\", \"name\", \"ngModel\", \"ngModelChange\"], [3, \"for\"], [\"type\", \"text\", \"placeholder\", \"shelter_country\", 1, \"form-control\", 3, \"id\", \"name\", \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"placeholder\", \"shelter_city\", 1, \"form-control\", 3, \"id\", \"name\", \"ngModel\", \"ngModelChange\"]],\n  template: function SheltersComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, SheltersComponent_div_0_Template, 3, 0, \"div\", 0);\n      i0.ɵɵtemplate(1, SheltersComponent_div_1_Template, 3, 2, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", !ctx.loaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.loaded);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.NgModel, i3.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","SheltersComponent","constructor","sheltersService","shelters","shelters_not_found","loaded","show_shelter_form","shelter","selected_id","ngOnInit","getAllShelters","subscribe","error","add_shelter","addShelter","s","err","console","log","edit_shelter","id","update_shelter","updateShelter","i","length","delete_shelter","deleteShelter","success","splice","show_add_shelter_form","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/temich/Desktop/aisha/webdev/Adopt-me-/front/Adopt-Me/src/app/shelters/shelters.component.html","/Users/temich/Desktop/aisha/webdev/Adopt-me-/front/Adopt-Me/src/app/shelters/shelters.component.ts"],"sourcesContent":["<div *ngIf=\"!loaded\">\n  <h2 class=\"text-info mt-4 ml-4\">Loading...</h2>\n</div>\n\n<div *ngIf=\"loaded\">\n  <div *ngIf=\"shelters_not_found\">\n    <h2 class=\"text-danger mt-4 ml-4\">Shelters not found!</h2>\n  </div>\n\n  <div *ngIf=\"!shelters_not_found\">\n\n    <button class=\"btn btn-success my-4\" (click)=\"show_add_shelter_form()\" [disabled]=\"show_shelter_form\">ADD SHELTER</button>\n\n    <form class=\"card px-5 py-5\" *ngIf=\"show_shelter_form && selected_id == -1\" style=\"width: 60%\" (ngSubmit)=\"add_shelter()\">\n      <div class=\"form-floating mb-3 ml-3\">\n        <input type=\"text\" class=\"form-control\" id=\"floatingName\" placeholder=\"shelter_name\" name=\"shelter_name\" [(ngModel)]=\"shelter.name\">\n        <label for=\"floatingName\">Name</label>\n      </div>\n\n      <div class=\"form-floating mb-3  ml-3\">\n        <input type=\"text\" class=\"form-control\" id=\"floatingCountry\" placeholder=\"shelter_country\" name=\"shelter_country\" [(ngModel)]=\"shelter.country\">\n        <label for=\"floatingCountry\">Country</label>\n      </div>\n\n      <div class=\"form-floating mb-3  ml-3\">\n        <input type=\"text\" class=\"form-control\" id=\"floatingCity\" placeholder=\"shelter_city\" name=\"shelter_city\" [(ngModel)]=\"shelter.city\">\n        <label for=\"floatingCity\">City</label>\n      </div>\n\n\n      <button class=\"btn btn-success mb-3\" type=\"submit\">ADD</button>\n      <button class=\"btn btn-secondary\" (click)=\"show_shelter_form=false\">CANCEL</button>\n    </form>\n\n    <div *ngFor=\"let s of shelters\" class=\"card mt-3\">\n<!--      <img src=\"...\" class=\"card-img-top\" alt=\"...\">-->\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">{{s.name}}</h5>\n        <p class=\"card-text\">{{s.city}}, {{s.country}}</p>\n        <button class=\"btn btn-primary\" (click)=\"edit_shelter(s)\" [disabled]=\"show_shelter_form\">Edit</button>\n        <button class=\"btn btn-danger ml-3\" (click)=\"delete_shelter(s.id)\">Delete</button>\n      </div>\n\n    <form class=\"card px-5 py-5 mx-3 my-3\" *ngIf=\"show_shelter_form && selected_id == s.id\" style=\"width: 60%\" (ngSubmit)=\"update_shelter()\">\n      <div class=\"form-floating mb-3  ml-3\">\n        <input type=\"text\" class=\"form-control\" id=\"floatingName{{s.id}}\" placeholder=\"shelter_name\" name=\"shelter_name_{{s.id}}\" [(ngModel)]=\"shelter.name\">\n        <label for=\"floatingName{{s.id}}\">Name</label>\n      </div>\n\n      <div class=\"form-floating mb-3  ml-3\">\n        <input type=\"text\" class=\"form-control\" id=\"floatingCountry{{s.id}}\" placeholder=\"shelter_country\" name=\"shelter_country_{{s.id}}\" [(ngModel)]=\"shelter.country\">\n        <label for=\"floatingCountry{{s.id}}\">Country</label>\n      </div>\n\n      <div class=\"form-floating mb-3  ml-3\">\n        <input type=\"text\" class=\"form-control\" id=\"floatingCity{{s.id}}\" placeholder=\"shelter_city\" name=\"shelter_city_{{s.id}}\" [(ngModel)]=\"shelter.city\">\n        <label for=\"floatingCity{{s.id}}\">City</label>\n      </div>\n\n      <button class=\"btn btn-success mb-3\" type=\"submit\">UPDATE</button>\n\n      <button class=\"btn btn-secondary\" (click)=\"show_shelter_form=false\">CANCEL</button>\n    </form>\n\n\n    </div>\n\n  </div>\n</div>\n","import {Component, OnInit} from '@angular/core';\nimport {Shelter} from \"../models/shelters\";\nimport {SheltersService} from \"../services/shelters.service\";\n\n@Component({\n    selector: 'app-shelters',\n    templateUrl: './shelters.component.html',\n    styleUrls: ['./shelters.component.css']\n})\nexport class SheltersComponent implements OnInit{\n  shelters: Shelter[];\n  shelters_not_found: boolean;\n  loaded: boolean;\n  show_shelter_form: boolean;\n  shelter: Shelter;\n  selected_id: number;\n\n  constructor(private sheltersService: SheltersService) {\n    this.shelters = [];\n    this.shelters_not_found = false;\n    this.loaded = true;\n    this.show_shelter_form = false;\n    this.shelter = {} as Shelter;\n    this.selected_id = -1;\n  }\n\n  ngOnInit(): void {\n    this.loaded = false;\n\n    this.sheltersService.getAllShelters().subscribe((shelters) => {\n      this.shelters = shelters;\n      this.loaded = true;\n    }, error => {\n      this.shelters_not_found = true;\n      this.loaded = true;\n    });\n  }\n\n  add_shelter(){\n    this.sheltersService.addShelter(this.shelter).subscribe((s) => {\n      //temp comment\n      // this.shelters.push(s);\n      this.show_shelter_form = false;\n    }, err => {\n      console.log('Shelter can not be added');\n    });\n  }\n\n  edit_shelter(s: Shelter){\n    this.show_shelter_form = true;\n    this.selected_id = s.id;\n    this.shelter = s;\n  }\n\n  update_shelter() {\n    this.sheltersService.updateShelter(this.selected_id, this.shelter).subscribe((s) => {\n      for(let i = 0; i < this.shelters.length; i++){\n        if(this.shelters[i].id === s.id){\n          this.shelters[i] = s;\n          break;\n        }\n      }\n\n      this.show_shelter_form = false;\n\n\n      //or\n      // this.sheltersService.getAllShelters().subscribe((shelters) => {\n      //   this.shelters = shelters;\n      // });\n    }, err => {\n      console.log('error updating shelter');\n    });\n  }\n\n  delete_shelter(id: number) {\n    this.sheltersService.deleteShelter(id).subscribe((success) => {\n      console.log('Shelter has successfully been deleted!');\n\n      for(let i = 0; i < this.shelters.length; i++){\n        if(this.shelters[i].id === id){\n          this.shelters.splice(i, 1);\n          break;\n        }\n      }\n\n\n      //or\n      // this.sheltersService.getAllShelters().subscribe((shelters) => {\n      //   this.shelters = shelters;\n      // });\n    }, err => {\n      console.log('Error deleting shelter');\n    });\n  }\n\n  show_add_shelter_form() {\n    this.show_shelter_form = true;\n    this.shelter = {} as Shelter;\n    this.selected_id = -1;\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}